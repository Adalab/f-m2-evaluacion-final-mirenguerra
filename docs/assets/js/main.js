"use strict";const buttonEl=document.querySelector(".search-btn"),listEl=document.querySelector(".show-list"),favouriteListEl=document.querySelector(".favourite-list");let myFavouriteShows=[];function getShow(){listEl.innerHTML="",getInfoFromAPI()}function getInfoFromAPI(){let e=document.querySelector(".search-input");fetch(`http://api.tvmaze.com/search/shows?q=${e.value}`).then(e=>e.json()).then(e=>{for(const t of e){const e=t.show.name;if(t.show.image){const o=t.show.image.medium;listEl.innerHTML+=`<li class='element'><h2 class="titleName">${e}</h2><img src="${o}"/></li>`}else listEl.innerHTML+=`<li class='element'><h2 class="titleName">${e}</h2><img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"/></li>`;const o=document.querySelectorAll(".element");for(let e=0;e<o.length;e++)o[e].addEventListener("click",addToMyFavourites)}})}function addToMyFavourites(e){if(!e.currentTarget.classList.contains("favouriteShows")){addClassToFavourite();const t={name:e.currentTarget.children[0].innerHTML,photo:e.currentTarget.children[1].currentSrc};myFavouriteShows.push(t);printFavourites(),saveFavouritesAtLS()}}function addClassToFavourite(){event.currentTarget.classList.add("favouriteShows")}function printFavourites(){favouriteListEl.innerHTML='<h2 class="favourite-title">My favourite shows</h2>';for(const e of myFavouriteShows){favouriteListEl.innerHTML+=`<li class='favouriteElement'><img class="favourite-image" src="${e.photo}"/><div class="alignTitle"><h2 class="favourite-titleName">${e.name}</h2></div><i class="fas fa-times-circle"></i></li>`;const t=document.querySelectorAll(".fa-times-circle");for(let e=0;e<t.length;e++)t[e].addEventListener("click",removeFromMyFavourites)}}function saveFavouritesAtLS(){localStorage.setItem("myFavouriteShows",JSON.stringify(myFavouriteShows))}function printFavouritesFromLS(){const e=localStorage.getItem("myFavouriteShows");e&&(myFavouriteShows=JSON.parse(e),printFavourites())}function removeFromMyFavourites(e){e.currentTarget.classList.remove("favouriteShows"),e.currentTarget.parentNode.removeChild(favouriteListEl),console.dir(e.currentTarget)}function init(){printFavouritesFromLS()}buttonEl.addEventListener("click",getShow),init();